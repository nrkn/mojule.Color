/*!
 * mojule.Color v1.02
 * A comprehensive JavaScript color class
 * http://mojule.co.nz/
 *
 * Copyright 2011, Information Age Ltd
 * Licensed under the MIT License
 *
 * Date: Wed Oct 26 10:38:48 2011 +1300
 */
var mojule=mojule===void 0?{}:mojule; (function(){function h(a){return a.red*0.299+a.green*0.587+a.blue*0.114}function t(a){var c=a.hue/360,d=a.saturation/100,b=a.lightness/100,a=function(a,c,b){b<0&&(b+=1);b>1&&(b-=1);return b<1/6?a+(c-a)*6*b:b<0.5?c:b<2/3?a+(c-a)*(2/3-b)*6:a},i=b<0.5?b*(1+d):b+d-b*d,j=2*b-i;d===0?d=b=c=b:(d=a(j,i,c+1/3),b=a(j,i,c),c=a(j,i,c-1/3));return{red:d*255,green:b*255,blue:c*255}}function u(a){a.substr(0,1)==="#"&&(a=a.substr(1));return a.length===3?{red:parseInt(a.substr(0,1)+a.substr(0,1),16),green:parseInt(a.substr(1, 1)+a.substr(1,1),16),blue:parseInt(a.substr(2,1)+a.substr(2,1),16)}:{red:parseInt(a.substr(0,2),16),green:parseInt(a.substr(2,2),16),blue:parseInt(a.substr(4,2),16)}}function s(a){a=a.toString(16);return a.length<2?"0"+a:a}function v(a,c){return{hue:b(a.hue*b([c.hue,c.h,1]).firstDefined()).wrap(360),saturation:b(a.saturation*b([c.saturation,c.s,1]).firstDefined()).clamp(0,100),lightness:b(a.lightness*b([c.lightness,c.l,1]).firstDefined()).clamp(0,100),alpha:b(a.alpha*b([c.alpha,c.a,1]).firstDefined()).clamp(0, 1)}}function w(a,c){return{hue:b(a.hue+b([c.hue,c.h,0]).firstDefined()).wrap(360),saturation:b(a.saturation+b([c.saturation,c.s,0]).firstDefined()).clamp(0,100),lightness:b(a.lightness+b([c.lightness,c.l,0]).firstDefined()).clamp(0,100),alpha:b(a.alpha+b([c.alpha,c.a,0]).firstDefined()).clamp(0,1)}}function e(a){return a.value!==void 0?a.setter():a.getter()}var b=function(a){return{number:{clamp:function(c,b){return a<c?c:a>b?b:a},wrap:function(c){return(a%c+c)%c}},string:{trim:function(){return String.prototype.trim? a.trim():a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},array:{first:function(c){var b;if(!c)return a[0];for(b=0;b<a.length;b+=1)if(c(a[b]))return a[b]},any:function(c){if(Array.prototype.some)return a.some(c);var b;if(!c)return false;for(b=0;b<a.length;b+=1)if(c(a[b]))return true;return false},firstDefined:function(){return b(a).first(function(a){return a!==void 0})},anyDefined:function(){return b(a).any(function(a){return a!==void 0})}}}[a instanceof Array?"array":typeof a]};mojule.Color=function(a){function c(){return{red:Math.round(g), green:Math.round(i),blue:Math.round(j),alpha:k,css:"rgba( "+Math.round(g)+", "+Math.round(i)+", "+Math.round(j)+", "+k+" )"}}function d(){return{hue:l,saturation:o,lightness:p,alpha:k,css:"hsla( "+l+", "+o+"%, "+p+"%, "+k+" )"}}var g=0,i=0,j=0,l=360,o=0,p=0,k=1,f=this;this.red=function(a){return e({value:a,setter:function(){return f.rgba({red:this.value})},getter:function(){return g}})};this.green=function(a){return e({value:a,setter:function(){return f.rgba({green:this.value})},getter:function(){return i}})}; this.blue=function(a){return e({value:a,setter:function(){return f.rgba({blue:this.value})},getter:function(){return j}})};this.hue=function(a){return e({value:a,setter:function(){return f.hsla({hue:this.value})},getter:function(){return l}})};this.saturation=function(a){return e({value:a,setter:function(){return f.hsla({saturation:this.value})},getter:function(){return o}})};this.lightness=function(a){return e({value:a,setter:function(){return f.hsla({lightness:this.value})},getter:function(){return p}})}; this.alpha=function(a){return e({value:a,setter:function(){return f.hsla({alpha:this.value})},getter:function(){return k}})};this.rgb=this.rgba=function(a){return e({value:a,setter:function(){var a,d,m;g=b(b([this.value.red,this.value.r,g,0]).firstDefined()).clamp(0,255);i=b(b([this.value.green,this.value.g,i,0]).firstDefined()).clamp(0,255);j=b(b([this.value.blue,this.value.b,j,0]).firstDefined()).clamp(0,255);k=b(b([this.value.alpha,this.value.a,k,1]).firstDefined()).clamp(0,1);m=c();a=m.red/255; d=m.green/255;var e=m.blue/255,q=Math.max(a,d,e),n=Math.min(a,d,e),h;m=(q+n)/2;var r=q-n;if(q===n)h=n=0;else{n=m>0.5?r/(2-q-n):r/(q+n);switch(q){case a:h=(d-e)/r+(d<e?6:0);break;case d:h=(e-a)/r+2;break;case e:h=(a-d)/r+4}h/=6}a=h*360;d=n*100;m*=100;l=a;o=d;p=m;return f},getter:c})};this.hsl=this.hsla=function(a){return e({value:a,setter:function(){l=b(b([this.value.hue,this.value.h,l,360]).firstDefined()).wrap(360);o=b(b([this.value.saturation,this.value.s,o,0]).firstDefined()).clamp(0,100);p=b(b([this.value.lightness, this.value.l,p,0]).firstDefined()).clamp(0,100);k=b(b([this.value.alpha,this.value.a,k,1]).firstDefined()).clamp(0,1);var a=t(d());g=a.red;i=a.green;j=a.blue;return f},getter:d})};this.css=function(){return parseFloat(k,10)===1?f.hex():c().css};this.hex=function(a){return e({value:a,setter:function(){return f.rgba(u(this.value))},getter:function(){var a=c(),b=s(Math.round(a.red)),d=s(Math.round(a.green)),a=s(Math.round(a.blue));return"#"+(b.charAt(0)===b.charAt(1)&&d.charAt(0)===d.charAt(1)&&a.charAt(0)=== a.charAt(1)?b.charAt(0)+d.charAt(0)+a.charAt(0):b+d+a)}})};this.brightness=function(){return h(c())};this.brightnessDifference=function(a){var b=f.rgba(),a=(new mojule.Color(a)).rgba();return Math.abs(h(b)-h(a))};this.colorDifference=function(a){var b=f.rgba(),c=(new mojule.Color(a)).rgba(),a=Math.max(b.red,c.red),d=Math.min(b.red,c.red),g=Math.max(b.green,c.green),e=Math.min(b.green,c.green),i=Math.max(b.blue,c.blue),b=Math.min(b.blue,c.blue);return a-d+(g-e)+(i-b)};this.hasEnoughContrast=function(a, b,c){c=c!==void 0?c:125;return f.colorDifference(a)>=(b!==void 0?b:500)&&f.brightnessDifference(a)>=c};this.multiplyHsla=function(a){return f.hsla(v(f.hsla(),a))};this.sumHsla=function(a){return f.hsla(w(f.hsla(),a))};this.clone=function(){return new mojule.Color(f.hsla())};this.getContrastingTone=function(){var a=mojule.Color,b;b=f.rgba();var c={red:255,green:255,blue:255},d={red:0,green:0,blue:0},g=Math.abs(h(b)-h(c));b=Math.abs(h(b)-h(d))-30>g?d:c;return new a(b)};(function(a){var c=b(mojule.Color.parsers.toArray()).first(function(b){return b.predicate(a)}); return!c?void 0:c.parse(a,f)})(a)};mojule.Color.parsers={undefinedValue:{predicate:function(a){return a===void 0||a===null},parse:function(a,b){return b}},cssHex:{predicate:function(a){return typeof a==="string"&&/^#(?:[0-9a-f]{3,6})\b$/i.test(b(a).trim())},parse:function(a,b){return b.hex(a)}},cssRgb:{predicate:function(a){return typeof a==="string"&&/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(b(a).trim())},parse:function(a,c){var d=b(a).trim().match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i); return c.rgba({red:parseInt(d[1],10),green:parseInt(d[2],10),blue:parseInt(d[3],10)})}},cssRgbPercent:{predicate:function(a){return typeof a==="string"&&/^rgb\s*\(\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*\)$/i.test(b(a).trim())},parse:function(a,c){var d=b(a).trim().match(/^rgb\s*\(\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*\)$/i);return c.rgba({red:parseInt(d[1],10)*2.55,green:parseInt(d[2],10)*2.55, blue:parseInt(d[3],10)*2.55,alpha:1})}},cssRgba:{predicate:function(a){return typeof a==="string"&&/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])\s*\)$/i.test(b(a).trim())},parse:function(a,c){var d=b(a).trim().match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]+|[0-9]*\.[0-9])\s*\)$/i);return c.rgba({red:parseInt(d[1],10),green:parseInt(d[2],10),blue:parseInt(d[3],10),alpha:parseFloat(d[4],10)})}},cssRgbaPercent:{predicate:function(a){return typeof a==="string"&& /^rgba\s*\(\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])\s*\)$/i.test(b(a).trim())},parse:function(a,c){var d=b(a).trim().match(/^rgba\s*\(\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])\s*\)$/i);return c.rgba({red:parseInt(d[1],10)*2.55,green:parseInt(d[2],10)*2.55,blue:parseInt(d[3],10)*2.55,alpha:parseFloat(d[4],10)})}},cssHsl:{predicate:function(a){return typeof a=== "string"&&/^hsl\s*\(\s*\d+\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*\)$/i.test(b(a).trim())},parse:function(a,c){var d=b(a).trim().match(/^hsl\s*\(\s*(\d+)\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*\)$/i);return c.hsla({hue:parseInt(d[1],10),saturation:parseInt(d[2],10),lightness:parseInt(d[3],10),alpha:1})}},cssHsla:{predicate:function(a){return typeof a==="string"&&/^hsla\s*\(\s*\d+\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])\s*\)$/i.test(b(a).trim())}, parse:function(a,c){var d=b(a).trim().match(/^hsla\s*\(\s*(\d+)\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])\s*\)$/i);return c.hsla({hue:parseInt(d[1],10),saturation:parseInt(d[2],10),lightness:parseInt(d[3],10),alpha:parseFloat(d[4],10)})}},cssNamedColor:{predicate:function(a){return typeof a==="string"&&mojule.Color.namedColors[b(a).trim()]!==void 0},parse:function(a,c){return c.rgba(mojule.Color.namedColors[b(a).trim()].rgba())}},color:{predicate:function(a){return typeof a.rgba=== "function"},parse:function(a,b){return b.rgba(a.rgba())}},rgba:{predicate:function(a){return b([a.red,a.green,a.blue,a.r,a.g,a.b]).anyDefined()},parse:function(a,b){return b.rgba(a)}},hsla:{predicate:function(a){return b([a.hue,a.saturation,a.lightness,a.h,a.s,a.l]).anyDefined()},parse:function(a,b){return b.hsla(a)}},toArray:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&typeof this[a]!=="function"&&b.push({name:a,predicate:this[a].predicate,parse:this[a].parse});return b}};mojule.Color.canParse= function(a){return b(mojule.Color.parsers.toArray()).any(function(b){return b.predicate(a)})};mojule.Color.parserType=function(a){var c=b(mojule.Color.parsers.toArray()).first(function(b){return b.predicate(a)});if(c!==void 0)return c.name};mojule.Color.addParser=function(a,b){mojule.Color.parsers[a]=b};mojule.Color.removeParser=function(a){mojule.Color.parsers[a]!==void 0&&delete mojule.Color.parsers[a]};mojule.Color.range=function(a,b,d){var g=new mojule.Color(a),e=new mojule.Color(b),a=g.hsla(), h=[],l=mojule.Color.parserType(b);l==="rgba"?e=g.clone().rgba(b):l==="hsla"&&(e=g.clone().hsla(b));b=e.hsla();d=!d||d<2?2:d;for(g=0;g<d;g+=1)h.push(new mojule.Color({hue:a.hue+(b.hue-a.hue)/(d-1)*g,saturation:a.saturation+(b.saturation-a.saturation)/(d-1)*g,lightness:a.lightness+(b.lightness-a.lightness)/(d-1)*g,alpha:a.alpha+(b.alpha-a.alpha)/(d-1)*g}));return h};mojule.Color.namedColors={aliceblue:new mojule.Color("#f0f8ff"),antiquewhite:new mojule.Color("#faebd7"),aqua:new mojule.Color("#00ffff"), aquamarine:new mojule.Color("#7fffd4"),azure:new mojule.Color("#f0ffff"),beige:new mojule.Color("#f5f5dc"),bisque:new mojule.Color("#ffe4c4"),black:new mojule.Color("#000000"),blanchedalmond:new mojule.Color("#ffebcd"),blue:new mojule.Color("#0000ff"),blueviolet:new mojule.Color("#8a2be2"),brown:new mojule.Color("#a52a2a"),burlywood:new mojule.Color("#deb887"),cadetblue:new mojule.Color("#5f9ea0"),chartreuse:new mojule.Color("#7fff00"),chocolate:new mojule.Color("#d2691e"),coral:new mojule.Color("#ff7f50"), cornflowerblue:new mojule.Color("#6495ed"),cornsilk:new mojule.Color("#fff8dc"),crimson:new mojule.Color("#dc143c"),cyan:new mojule.Color("#00ffff"),darkblue:new mojule.Color("#00008b"),darkcyan:new mojule.Color("#008b8b"),darkgoldenrod:new mojule.Color("#b8860b"),darkgray:new mojule.Color("#a9a9a9"),darkgreen:new mojule.Color("#006400"),darkgrey:new mojule.Color("#a9a9a9"),darkkhaki:new mojule.Color("#bdb76b"),darkmagenta:new mojule.Color("#8b008b"),darkolivegreen:new mojule.Color("#556b2f"),darkorange:new mojule.Color("#ff8c00"), darkorchid:new mojule.Color("#9932cc"),darkred:new mojule.Color("#8b0000"),darksalmon:new mojule.Color("#e9967a"),darkseagreen:new mojule.Color("#8fbc8f"),darkslateblue:new mojule.Color("#483d8b"),darkslategray:new mojule.Color("#2f4f4f"),darkslategrey:new mojule.Color("#2f4f4f"),darkturquoise:new mojule.Color("#00ced1"),darkviolet:new mojule.Color("#9400d3"),deeppink:new mojule.Color("#ff1493"),deepskyblue:new mojule.Color("#00bfff"),dimgray:new mojule.Color("#696969"),dimgrey:new mojule.Color("#696969"), dodgerblue:new mojule.Color("#1e90ff"),firebrick:new mojule.Color("#b22222"),floralwhite:new mojule.Color("#fffaf0"),forestgreen:new mojule.Color("#228b22"),fuchsia:new mojule.Color("#ff00ff"),gainsboro:new mojule.Color("#dcdcdc"),ghostwhite:new mojule.Color("#f8f8ff"),gold:new mojule.Color("#ffd700"),goldenrod:new mojule.Color("#daa520"),gray:new mojule.Color("#808080"),green:new mojule.Color("#008000"),greenyellow:new mojule.Color("#adff2f"),grey:new mojule.Color("#808080"),honeydew:new mojule.Color("#f0fff0"), hotpink:new mojule.Color("#ff69b4"),indianred:new mojule.Color("#cd5c5c"),indigo:new mojule.Color("#4b0082"),ivory:new mojule.Color("#fffff0"),khaki:new mojule.Color("#f0e68c"),lavender:new mojule.Color("#e6e6fa"),lavenderblush:new mojule.Color("#fff0f5"),lawngreen:new mojule.Color("#7cfc00"),lemonchiffon:new mojule.Color("#fffacd"),lightblue:new mojule.Color("#add8e6"),lightcoral:new mojule.Color("#f08080"),lightcyan:new mojule.Color("#e0ffff"),lightgoldenrodyellow:new mojule.Color("#fafad2"),lightgray:new mojule.Color("#d3d3d3"), lightgreen:new mojule.Color("#90ee90"),lightgrey:new mojule.Color("#d3d3d3"),lightpink:new mojule.Color("#ffb6c1"),lightsalmon:new mojule.Color("#ffa07a"),lightseagreen:new mojule.Color("#20b2aa"),lightskyblue:new mojule.Color("#87cefa"),lightslategray:new mojule.Color("#778899"),lightslategrey:new mojule.Color("#778899"),lightsteelblue:new mojule.Color("#b0c4de"),lightyellow:new mojule.Color("#ffffe0"),lime:new mojule.Color("#00ff00"),limegreen:new mojule.Color("#32cd32"),linen:new mojule.Color("#faf0e6"), magenta:new mojule.Color("#ff00ff"),maroon:new mojule.Color("#800000"),mediumaquamarine:new mojule.Color("#66cdaa"),mediumblue:new mojule.Color("#0000cd"),mediumorchid:new mojule.Color("#ba55d3"),mediumpurple:new mojule.Color("#9370db"),mediumseagreen:new mojule.Color("#3cb371"),mediumslateblue:new mojule.Color("#7b68ee"),mediumspringgreen:new mojule.Color("#00fa9a"),mediumturquoise:new mojule.Color("#48d1cc"),mediumvioletred:new mojule.Color("#c71585"),midnightblue:new mojule.Color("#191970"),mintcream:new mojule.Color("#f5fffa"), mistyrose:new mojule.Color("#ffe4e1"),moccasin:new mojule.Color("#ffe4b5"),navajowhite:new mojule.Color("#ffdead"),navy:new mojule.Color("#000080"),oldlace:new mojule.Color("#fdf5e6"),olive:new mojule.Color("#808000"),olivedrab:new mojule.Color("#6b8e23"),orange:new mojule.Color("#ffa500"),orangered:new mojule.Color("#ff4500"),orchid:new mojule.Color("#da70d6"),palegoldenrod:new mojule.Color("#eee8aa"),palegreen:new mojule.Color("#98fb98"),paleturquoise:new mojule.Color("#afeeee"),palevioletred:new mojule.Color("#db7093"), papayawhip:new mojule.Color("#ffefd5"),peachpuff:new mojule.Color("#ffdab9"),peru:new mojule.Color("#cd853f"),pink:new mojule.Color("#ffc0cb"),plum:new mojule.Color("#dda0dd"),powderblue:new mojule.Color("#b0e0e6"),purple:new mojule.Color("#800080"),red:new mojule.Color("#ff0000"),rosybrown:new mojule.Color("#bc8f8f"),royalblue:new mojule.Color("#4169e1"),saddlebrown:new mojule.Color("#8b4513"),salmon:new mojule.Color("#fa8072"),sandybrown:new mojule.Color("#f4a460"),seagreen:new mojule.Color("#2e8b57"), seashell:new mojule.Color("#fff5ee"),sienna:new mojule.Color("#a0522d"),silver:new mojule.Color("#c0c0c0"),skyblue:new mojule.Color("#87ceeb"),slateblue:new mojule.Color("#6a5acd"),slategray:new mojule.Color("#708090"),slategrey:new mojule.Color("#708090"),snow:new mojule.Color("#fffafa"),springgreen:new mojule.Color("#00ff7f"),steelblue:new mojule.Color("#4682b4"),tan:new mojule.Color("#d2b48c"),teal:new mojule.Color("#008080"),thistle:new mojule.Color("#d8bfd8"),tomato:new mojule.Color("#ff6347"), turquoise:new mojule.Color("#40e0d0"),transparent:new mojule.Color({alpha:0}),violet:new mojule.Color("#ee82ee"),wheat:new mojule.Color("#f5deb3"),white:new mojule.Color("#ffffff"),whitesmoke:new mojule.Color("#f5f5f5"),yellow:new mojule.Color("#ffff00"),yellowgreen:new mojule.Color("#9acd32")}})();var Color=Color===void 0?mojule.Color:Color;