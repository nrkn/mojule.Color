/*!
 * mojule.Color v0.9
 * A comprehensive JavaScript color class
 * http://mojule.co.nz/
 *
 * Copyright 2011, Information Age Ltd
 * Licensed under the MIT License
 *
 * Date: Tue Oct 11 19:38:48 2011 +1300
 */
var mojule=mojule===void 0?{}:mojule; (function(){if(Number.prototype.clamp===void 0)Number.prototype.clamp=function(c,f){return this<c?c:this>f?f:this};if(Number.prototype.wrap===void 0)Number.prototype.wrap=function(c){return(this%c+c)%c};if(Array.prototype.first===void 0)Array.prototype.first=function(c){var f;if(!c)return this[0];for(f=0;f<this.length;f+=1)if(c(this[f]))return this[f]};if(Array.prototype.any===void 0)Array.prototype.any=function(c){var f;if(!c)return false;for(f=0;f<this.length;f+=1)if(c(this[f]))return true;return false}; if(Array.prototype.firstDefined===void 0)Array.prototype.firstDefined=function(){return this.first(function(c){return c!==void 0})};if(Array.prototype.anyDefined===void 0)Array.prototype.anyDefined=function(){return this.any(function(c){return c!==void 0})};if(String.prototype.trim===void 0)String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};mojule.Color=function(c){function f(){return{red:Math.round(m),green:Math.round(n),blue:Math.round(o),alpha:l,css:"rgba( "+ Math.round(m)+", "+Math.round(n)+", "+Math.round(o)+", "+l+" )"}}function h(){return{hue:p,saturation:q,lightness:r,alpha:l,css:"hsla( "+p+", "+q+"%, "+r+"%, "+l+" )"}}function g(a){return a.red*0.299+a.green*0.587+a.blue*0.114}function k(a){var b=a.hue/360,d=a.saturation/100,e=a.lightness/100,a=function(a,b,d){d<0&&(d+=1);d>1&&(d-=1);return d<1/6?a+(b-a)*6*d:d<0.5?b:d<2/3?a+(b-a)*(2/3-d)*6:a},c=e<0.5?e*(1+d):e+d-e*d,f=2*e-c;d===0?d=e=b=e:(d=a(f,c,b+1/3),e=a(f,c,b),b=a(f,c,b-1/3));return{red:d*255, green:e*255,blue:b*255}}function s(a){a.substr(0,1)==="#"&&(a=a.substr(1));return a.length===3?{red:parseInt(a.substr(0,1)+a.substr(0,1),16),green:parseInt(a.substr(1,1)+a.substr(1,1),16),blue:parseInt(a.substr(2,1)+a.substr(2,1),16)}:{red:parseInt(a.substr(0,2),16),green:parseInt(a.substr(2,2),16),blue:parseInt(a.substr(4,2),16)}}function j(a){a=a.toString(16);return a.length<2?"0"+a:a}function u(a,b){return{hue:(a.hue*[b.hue,b.h,1].firstDefined()).wrap(360),saturation:(a.saturation*[b.saturation, b.s,1].firstDefined()).clamp(0,100),lightness:(a.lightness*[b.lightness,b.l,1].firstDefined()).clamp(0,100),alpha:(a.alpha*[b.alpha,b.a,1].firstDefined()).clamp(0,1)}}function v(a,b){return{hue:(a.hue+[b.hue,b.h,0].firstDefined()).wrap(360),saturation:(a.saturation+[b.saturation,b.s,0].firstDefined()).clamp(0,100),lightness:(a.lightness+[b.lightness,b.l,0].firstDefined()).clamp(0,100),alpha:(a.alpha+[b.alpha,b.a,0].firstDefined()).clamp(0,1)}}function i(a){return a.value!==void 0?a.setter():a.getter()} var m=0,n=0,o=0,p=360,q=0,r=0,l=1,e=this,t;this.red=function(a){return i({value:a,setter:function(){return e.rgba({red:this.value})},getter:function(){return m}})};this.green=function(a){return i({value:a,setter:function(){return e.rgba({green:this.value})},getter:function(){return n}})};this.blue=function(a){return i({value:a,setter:function(){return e.rgba({blue:this.value})},getter:function(){return o}})};this.hue=function(a){return i({value:a,setter:function(){return e.hsla({hue:this.value})}, getter:function(){return p}})};this.saturation=function(a){return i({value:a,setter:function(){return e.hsla({saturation:this.value})},getter:function(){return q}})};this.lightness=function(a){return i({value:a,setter:function(){return e.hsla({lightness:this.value})},getter:function(){return r}})};this.alpha=function(a){return i({value:a,setter:function(){return e.hsla({alpha:this.value})},getter:function(){return l}})};this.rgb=function(a){return e.rgba(a)};this.rgba=function(a){return i({value:a, setter:function(){var a,d,c;m=[this.value.red,this.value.r,m,0].firstDefined().clamp(0,255);n=[this.value.green,this.value.g,n,0].firstDefined().clamp(0,255);o=[this.value.blue,this.value.b,o,0].firstDefined().clamp(0,255);l=[this.value.alpha,this.value.a,l,1].firstDefined().clamp(0,1);c=f();a=c.red/255;d=c.green/255;var g=c.blue/255,h=Math.max(a,d,g),i=Math.min(a,d,g),j;c=(h+i)/2;var k=h-i;if(h===i)j=i=0;else{i=c>0.5?k/(2-h-i):k/(h+i);switch(h){case a:j=(d-g)/k+(d<g?6:0);break;case d:j=(g-a)/k+2; break;case g:j=(a-d)/k+4}j/=6}a=j*360;d=i*100;c*=100;p=a;q=d;r=c;return e},getter:f})};this.hsl=function(a){return e.hsla(a)};this.hsla=function(a){return i({value:a,setter:function(){p=[this.value.hue,this.value.h,p,360].firstDefined().wrap(360);q=[this.value.saturation,this.value.s,q,0].firstDefined().clamp(0,100);r=[this.value.lightness,this.value.l,r,0].firstDefined().clamp(0,100);l=[this.value.alpha,this.value.a,l,1].firstDefined().clamp(0,1);var a=k(h());m=a.red;n=a.green;o=a.blue;return e}, getter:h})};this.css=function(){return parseFloat(l,10)===1?e.hex():f().css};this.hex=function(a){return i({value:a,setter:function(){return e.rgba(s(this.value))},getter:function(){var a=f(),d=j(Math.round(a.red)),c=j(Math.round(a.green)),a=j(Math.round(a.blue));return"#"+(d.charAt(0)===d.charAt(1)&&c.charAt(0)===c.charAt(1)&&a.charAt(0)===a.charAt(1)?d.charAt(0)+c.charAt(0)+a.charAt(0):d+c+a)}})};this.brightness=function(){return g(f())};this.brightnessDifference=function(a){var b=e.rgba(),a=(new mojule.Color(a)).rgba(); return Math.abs(g(b)-g(a))};this.colorDifference=function(a){var b=e.rgba(),d=(new mojule.Color(a)).rgba(),a=Math.max(b.red,d.red),c=Math.min(b.red,d.red),f=Math.max(b.green,d.green),g=Math.min(b.green,d.green),h=Math.max(b.blue,d.blue),b=Math.min(b.blue,d.blue);return a-c+(f-g)+(h-b)};this.hasEnoughContrast=function(a,b,d){d=d!==void 0?d:125;return e.colorDifference(a)>=(b!==void 0?b:500)&&e.brightnessDifference(a)>=d};this.multiplyHsla=function(a){return e.hsla(u(e.hsla(),a))};this.sumHsla=function(a){return e.hsla(v(e.hsla(), a))};this.clone=function(){return new mojule.Color(e.hsla())};this.getContrastingTone=function(){var a=mojule.Color,b;b=e.rgba();var d={red:255,green:255,blue:255},c={red:0,green:0,blue:0},f=Math.abs(g(b)-g(d));b=Math.abs(g(b)-g(c))-30>f?c:d;return new a(b)};mojule.Color.canParse=function(a){return t.toArray().any(function(b){return b.predicate(a)})};mojule.Color.parserType=function(a){var b=t.toArray().first(function(b){return b.predicate(a)});if(b!==void 0)return b.name};t={undefinedValue:{predicate:function(a){return a=== void 0||a===null},parse:function(){return e}},cssHex:{predicate:function(a){return typeof a==="string"&&/^#(?:[0-9a-f]{3,6})\b$/i.test(a.trim())},parse:e.hex},cssRgb:{predicate:function(a){return typeof a==="string"&&/^rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(a.trim())},parse:function(a){a=a.trim().match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return e.rgba({red:parseInt(a[1],10),green:parseInt(a[2],10),blue:parseInt(a[3],10)})}},cssRgbPercent:{predicate:function(a){return typeof a=== "string"&&/^rgb\s*\(\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*\)$/i.test(a.trim())},parse:function(a){a=a.trim().match(/^rgb\s*\(\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*\)$/i);return e.rgba({red:parseInt(a[1],10)*2.55,green:parseInt(a[2],10)*2.55,blue:parseInt(a[3],10)*2.55,alpha:1})}},cssRgba:{predicate:function(a){return typeof a==="string"&&/^rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])\s*\)$/i.test(a.trim())}, parse:function(a){a=a.trim().match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]+|[0-9]*\.[0-9])\s*\)$/i);return e.rgba({red:parseInt(a[1],10),green:parseInt(a[2],10),blue:parseInt(a[3],10),alpha:parseFloat(a[4],10)})}},cssRgbaPercent:{predicate:function(a){return typeof a==="string"&&/^rgba\s*\(\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])\s*\)$/i.test(a.trim())},parse:function(a){a=a.trim().match(/^rgba\s*\(\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])\s*\)$/i); return e.rgba({red:parseInt(a[1],10)*2.55,green:parseInt(a[2],10)*2.55,blue:parseInt(a[3],10)*2.55,alpha:parseFloat(a[4],10)})}},cssHsl:{predicate:function(a){return typeof a==="string"&&/^hsl\s*\(\s*\d+\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*\)$/i.test(a.trim())},parse:function(a){a=a.trim().match(/^hsl\s*\(\s*(\d+)\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*\)$/i);return e.hsla({hue:parseInt(a[1],10),saturation:parseInt(a[2],10),lightness:parseInt(a[3], 10),alpha:1})}},cssHsla:{predicate:function(a){return typeof a==="string"&&/^hsla\s*\(\s*\d+\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])%\s*,\s*(?:[0-9]+|[0-9]*\.[0-9])\s*\)$/i.test(a.trim())},parse:function(a){a=a.trim().match(/^hsla\s*\(\s*(\d+)\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])%\s*,\s*([0-9]+|[0-9]*\.[0-9])\s*\)$/i);return e.hsla({hue:parseInt(a[1],10),saturation:parseInt(a[2],10),lightness:parseInt(a[3],10),alpha:parseFloat(a[4],10)})}},cssNamedColor:{predicate:function(a){return typeof a=== "string"&&mojule.Color.namedColors[a.trim()]!==void 0},parse:function(a){return e=mojule.Color.namedColors[a.trim()]}},color:{predicate:function(a){return typeof a.rgba==="function"},parse:function(a){return e.rgba(a.rgba())}},rgba:{predicate:function(a){return[a.red,a.green,a.blue,a.r,a.g,a.b].anyDefined()},parse:function(a){return e.rgba(a)}},hsla:{predicate:function(a){return[a.hue,a.saturation,a.lightness,a.h,a.s,a.l].anyDefined()},parse:function(a){return e.hsla(a)}},toArray:function(){var a= [],b=function(b){for(var c in b)b.hasOwnProperty(c)&&typeof b[c]!=="function"&&a.push({name:c,predicate:b[c].predicate,parse:b[c].parse})};b(this);b(mojule.Color.extraParsers);return a}};(function(a){var b=t.toArray().first(function(b){return b.predicate(a)});return!b?void 0:b.parse(a,e)})(c)};mojule.Color.range=function(c,f,h){var g=new mojule.Color(c),k=new mojule.Color(f),c=g.hsla(),s=[],j=mojule.Color.parserType(f);j==="rgba"?k=g.clone().rgba(f):j==="hsla"&&(k=g.clone().hsla(f));f=k.hsla();h= !h||h<2?2:h;for(g=0;g<h;g+=1)s.push(new mojule.Color({hue:c.hue+(f.hue-c.hue)/(h-1)*g,saturation:c.saturation+(f.saturation-c.saturation)/(h-1)*g,lightness:c.lightness+(f.lightness-c.lightness)/(h-1)*g,alpha:c.alpha+(f.alpha-c.alpha)/(h-1)*g}));return s};mojule.Color.extraParsers={};mojule.Color.addParser=function(c,f){mojule.Color.extraParsers[c]=f};mojule.Color.removeParser=function(c){mojule.Color.extraParsers[c]!==void 0&&delete mojule.Color.extraParsers[c]};mojule.Color.namedColors={aliceblue:new mojule.Color("#f0f8ff"), antiquewhite:new mojule.Color("#faebd7"),aqua:new mojule.Color("#00ffff"),aquamarine:new mojule.Color("#7fffd4"),azure:new mojule.Color("#f0ffff"),beige:new mojule.Color("#f5f5dc"),bisque:new mojule.Color("#ffe4c4"),black:new mojule.Color("#000000"),blanchedalmond:new mojule.Color("#ffebcd"),blue:new mojule.Color("#0000ff"),blueviolet:new mojule.Color("#8a2be2"),brown:new mojule.Color("#a52a2a"),burlywood:new mojule.Color("#deb887"),cadetblue:new mojule.Color("#5f9ea0"),chartreuse:new mojule.Color("#7fff00"), chocolate:new mojule.Color("#d2691e"),coral:new mojule.Color("#ff7f50"),cornflowerblue:new mojule.Color("#6495ed"),cornsilk:new mojule.Color("#fff8dc"),crimson:new mojule.Color("#dc143c"),cyan:new mojule.Color("#00ffff"),darkblue:new mojule.Color("#00008b"),darkcyan:new mojule.Color("#008b8b"),darkgoldenrod:new mojule.Color("#b8860b"),darkgray:new mojule.Color("#a9a9a9"),darkgreen:new mojule.Color("#006400"),darkgrey:new mojule.Color("#a9a9a9"),darkkhaki:new mojule.Color("#bdb76b"),darkmagenta:new mojule.Color("#8b008b"), darkolivegreen:new mojule.Color("#556b2f"),darkorange:new mojule.Color("#ff8c00"),darkorchid:new mojule.Color("#9932cc"),darkred:new mojule.Color("#8b0000"),darksalmon:new mojule.Color("#e9967a"),darkseagreen:new mojule.Color("#8fbc8f"),darkslateblue:new mojule.Color("#483d8b"),darkslategray:new mojule.Color("#2f4f4f"),darkslategrey:new mojule.Color("#2f4f4f"),darkturquoise:new mojule.Color("#00ced1"),darkviolet:new mojule.Color("#9400d3"),deeppink:new mojule.Color("#ff1493"),deepskyblue:new mojule.Color("#00bfff"), dimgray:new mojule.Color("#696969"),dimgrey:new mojule.Color("#696969"),dodgerblue:new mojule.Color("#1e90ff"),firebrick:new mojule.Color("#b22222"),floralwhite:new mojule.Color("#fffaf0"),forestgreen:new mojule.Color("#228b22"),fuchsia:new mojule.Color("#ff00ff"),gainsboro:new mojule.Color("#dcdcdc"),ghostwhite:new mojule.Color("#f8f8ff"),gold:new mojule.Color("#ffd700"),goldenrod:new mojule.Color("#daa520"),gray:new mojule.Color("#808080"),green:new mojule.Color("#008000"),greenyellow:new mojule.Color("#adff2f"), grey:new mojule.Color("#808080"),honeydew:new mojule.Color("#f0fff0"),hotpink:new mojule.Color("#ff69b4"),indianred:new mojule.Color("#cd5c5c"),indigo:new mojule.Color("#4b0082"),ivory:new mojule.Color("#fffff0"),khaki:new mojule.Color("#f0e68c"),lavender:new mojule.Color("#e6e6fa"),lavenderblush:new mojule.Color("#fff0f5"),lawngreen:new mojule.Color("#7cfc00"),lemonchiffon:new mojule.Color("#fffacd"),lightblue:new mojule.Color("#add8e6"),lightcoral:new mojule.Color("#f08080"),lightcyan:new mojule.Color("#e0ffff"), lightgoldenrodyellow:new mojule.Color("#fafad2"),lightgray:new mojule.Color("#d3d3d3"),lightgreen:new mojule.Color("#90ee90"),lightgrey:new mojule.Color("#d3d3d3"),lightpink:new mojule.Color("#ffb6c1"),lightsalmon:new mojule.Color("#ffa07a"),lightseagreen:new mojule.Color("#20b2aa"),lightskyblue:new mojule.Color("#87cefa"),lightslategray:new mojule.Color("#778899"),lightslategrey:new mojule.Color("#778899"),lightsteelblue:new mojule.Color("#b0c4de"),lightyellow:new mojule.Color("#ffffe0"),lime:new mojule.Color("#00ff00"), limegreen:new mojule.Color("#32cd32"),linen:new mojule.Color("#faf0e6"),magenta:new mojule.Color("#ff00ff"),maroon:new mojule.Color("#800000"),mediumaquamarine:new mojule.Color("#66cdaa"),mediumblue:new mojule.Color("#0000cd"),mediumorchid:new mojule.Color("#ba55d3"),mediumpurple:new mojule.Color("#9370db"),mediumseagreen:new mojule.Color("#3cb371"),mediumslateblue:new mojule.Color("#7b68ee"),mediumspringgreen:new mojule.Color("#00fa9a"),mediumturquoise:new mojule.Color("#48d1cc"),mediumvioletred:new mojule.Color("#c71585"), midnightblue:new mojule.Color("#191970"),mintcream:new mojule.Color("#f5fffa"),mistyrose:new mojule.Color("#ffe4e1"),moccasin:new mojule.Color("#ffe4b5"),navajowhite:new mojule.Color("#ffdead"),navy:new mojule.Color("#000080"),oldlace:new mojule.Color("#fdf5e6"),olive:new mojule.Color("#808000"),olivedrab:new mojule.Color("#6b8e23"),orange:new mojule.Color("#ffa500"),orangered:new mojule.Color("#ff4500"),orchid:new mojule.Color("#da70d6"),palegoldenrod:new mojule.Color("#eee8aa"),palegreen:new mojule.Color("#98fb98"), paleturquoise:new mojule.Color("#afeeee"),palevioletred:new mojule.Color("#db7093"),papayawhip:new mojule.Color("#ffefd5"),peachpuff:new mojule.Color("#ffdab9"),peru:new mojule.Color("#cd853f"),pink:new mojule.Color("#ffc0cb"),plum:new mojule.Color("#dda0dd"),powderblue:new mojule.Color("#b0e0e6"),purple:new mojule.Color("#800080"),red:new mojule.Color("#ff0000"),rosybrown:new mojule.Color("#bc8f8f"),royalblue:new mojule.Color("#4169e1"),saddlebrown:new mojule.Color("#8b4513"),salmon:new mojule.Color("#fa8072"), sandybrown:new mojule.Color("#f4a460"),seagreen:new mojule.Color("#2e8b57"),seashell:new mojule.Color("#fff5ee"),sienna:new mojule.Color("#a0522d"),silver:new mojule.Color("#c0c0c0"),skyblue:new mojule.Color("#87ceeb"),slateblue:new mojule.Color("#6a5acd"),slategray:new mojule.Color("#708090"),slategrey:new mojule.Color("#708090"),snow:new mojule.Color("#fffafa"),springgreen:new mojule.Color("#00ff7f"),steelblue:new mojule.Color("#4682b4"),tan:new mojule.Color("#d2b48c"),teal:new mojule.Color("#008080"), thistle:new mojule.Color("#d8bfd8"),tomato:new mojule.Color("#ff6347"),turquoise:new mojule.Color("#40e0d0"),transparent:new mojule.Color({alpha:0}),violet:new mojule.Color("#ee82ee"),wheat:new mojule.Color("#f5deb3"),white:new mojule.Color("#ffffff"),whitesmoke:new mojule.Color("#f5f5f5"),yellow:new mojule.Color("#ffff00"),yellowgreen:new mojule.Color("#9acd32")}})();var Color=Color===void 0?mojule.Color:Color;